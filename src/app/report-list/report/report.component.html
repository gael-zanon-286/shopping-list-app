
<ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
  <ion-refresher-content></ion-refresher-content>
</ion-refresher>
<ion-content *ngIf="!loading">
  <ion-card style="padding: 0px;">

      <ion-input *ngIf="reportService.editMode" i18n [(ngModel)]="newCategoryName" type="text" name="newCategoryName" lines="none" [placeholder]="'reports.newCategory' | translate" fill="solid" style="--placeholder-opacity: 0.9; --padding-start: 20px; --padding-end: 15px; font-size: 18px; --background: wheat;">
        <ion-icon slot="end" class="add-icon" [icon]="addCircleOutline" (click)="addCategory()"></ion-icon>
      </ion-input>

    <ion-list class="def-list-no-border">
      <ion-reorder-group [disabled]="false" (ionItemReorder)="handleItemReorder($event)">
        <ng-container *ngFor="let category of categories; trackBy: trackByCategory">

          <ion-row lines="full" class='text-md list-row' style="background-color: wheat; border: solid 2px rgb(58, 58, 58); border-radius: 5px; padding: 10px;">
            <ion-col size="7" style="padding-left: 10px; color: rgb(57, 57, 57);" class="vert-align">
              <div class="wrap"><strong>{{ category.name }}</strong></div>
            </ion-col>
            <ion-col size="3" class="vert-align">
              <div>
                <ion-label style="color: rgb(112, 110, 101);" type="decimal">{{category.totalCost}} €</ion-label>
              </div>
            </ion-col>
            <ion-col *ngIf="reportService.editMode" size="2" class="vert-align">
              <ion-icon class="trash-icon" [icon]="trashBin"  (click)="deleteCategory(category)"></ion-icon>
            </ion-col>
          </ion-row>

          <div *ngFor="let item of category.items; trackBy: trackByItem">
            <ion-row class="text-sm" style="padding-left: 10px;">
              <ion-col size="8" style="padding-left: 10px; color: rgba(0,0,0,0.85);" class="vert-align">
                <div class="wrap">{{ item.name }} - <span style="color: rgba(112, 112, 112, 0.85)">{{ dateService.parseDate(item.date) }}</span></div>
              </ion-col>
              <ion-col size="2" class="vert-align">
                <div>
                  <ion-label style="color: rgb(112, 110, 101);">{{ item.cost ?? 0 }} €</ion-label>
                </div>
              </ion-col>
              <ion-col size="2" class="vert-align">
                <ion-reorder>
                  <div>
                    <ion-icon class="move-icon" [icon]="menuOutline"></ion-icon>
                  </div>
                </ion-reorder>
              </ion-col>
            </ion-row>
          </div>
        </ng-container>
      </ion-reorder-group>
    </ion-list>
  </ion-card>
</ion-content>
